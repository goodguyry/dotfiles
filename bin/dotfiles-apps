#!/bin/bash
#
# Copyright (c) 2024 Ryan Domingue and contributors
# Report bugs at: https://github.com/goodguyry/dotfiles/issues
#
# This is free software with ABSOLUTELY NO WARRANTY.
#
# usage: dotfiles apps

# Source setup files.
source "${dotfiles_dir}/lib/mkdirs";
source "${dotfiles_dir}/lib/package-installers";
source "${dotfiles_dir}/lib/setfile";
source "${dotfiles_dir}/lib/status";

# Homebrew is required.
! [ -z "$(type -P brew)" ] && status --error 'Homebrew is required';

# Install apps.
source var/packages.macos.sh;
[ ${#BREW_CASK_LIST[@]} -gt 0 ] && installbrews --cask "${BREW_CASK_LIST[@]}";

if [ ${#MAS_APPS_LIST[@]} -gt 0 ]; then
  for APP in "${MAS_APPS_LIST[@]}"; do
    mas install "${APP}";
  done;

  [[ $? ]] \
    && status --success 'App Store apps are ready.' \
    || status --error 'There was a problem installing App Store apps.';
fi
