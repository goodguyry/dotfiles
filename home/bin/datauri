#!/bin/bash
# @todo Remove this function as unused?
#
# Copyright (c) 2024 Ryan Domingue and contributors
# Report bugs at: https://github.com/goodguyry/dotfiles/issues
#
# This is free software with ABSOLUTELY NO WARRANTY.
#
# usage: datauri <file>
#
# Create a base64-encoded data URI from the given file.

mimetype="$(file -b --mime-type "${1}")";

if [[ "${mimetype}" == text/* ]]; then
  mimetype="${mimetype};charset=utf-8";
fi;

endcoded_file=$( echo "data:${mimetype};base64,$(openssl base64 -in "$1" | tr -d '\n')" );
echo "${endcoded_file}" | pbcopy;

echo -e "The data URI is on the clipboard:\n${endcoded_file}";
